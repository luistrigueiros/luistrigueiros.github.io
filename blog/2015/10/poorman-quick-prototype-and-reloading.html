<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	    <meta charset="utf-8" />
	    <title>Poorman&#39;s solution to quick prototyping and code reloading</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	    <meta name="description" content="" />
	    <meta name="author" content="" />
	    <meta name="keywords" content="" />
	    <meta name="generator" content="JBake" />
	
	    <!-- Le styles -->
	    <link rel="stylesheet" href="../../../css/bootstrap.min.css" />
	    <link rel="stylesheet" href="../../../css/asciidoctor.css" />
	    <link rel="stylesheet" href="../../../css/base.css" />
	    <link rel="stylesheet" href="../../../css/prettify.css" />
	    <link rel="stylesheet" href="../../../css/bootstrap-social.css" />
	    <link rel="stylesheet" href="../../../css/font-awesome.css" />

	    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	    <!--[if lt IE 9]>
	      <script src="../../../js/html5shiv.min.js"></script>
	    <![endif]-->
	
	    <!-- Fav and touch icons -->
	    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png"/>-->
	    <link rel="shortcut icon" href="../../../favicon.ico" />
	</head>
	<body onload="prettyPrint()">
	<div id="wrap">
		<div>
	
	  <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
          <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </button>
              <a class="btn btn-social-icon btn-linkedin" href="https://github.com/luistrigueiros" shape="rect"><span class="fa fa-linkedin"></span></a>
              <a class="btn btn-social-icon btn-github" href="https://ie.linkedin.com/in/luistrigueiros" shape="rect"><span class="fa fa-github"></span></a>
          </div>
          <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a shape="rect" href="../../../index.html">Home</a></li>
            <li><a shape="rect" href="../../../about.html">About</a></li>
            <li><a shape="rect" href="../../../cv.html">CV</a></li>
            <li><a shape="rect" href="../../../feed.xml">Subscribe</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

	</div>
		<div class="container">
	
			<div class="page-header">
				<h1>Poorman&#39;s solution to quick prototyping and code reloading</h1>
			</div>
		
			<p><em>25 October 2015</em></p>
		
			<p><div class="sect1">
<h2 id="_the_problem">The problem</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes it can be very handy to be able to quickly prototype code and try a quick implementation of an idea or fix without having to go through the whole cycle of build, deploy and restart the app, what typically happens on any app of significant size is that build and deploy are OK, but then the restart is lengthy since it needs to load the initial state into memory, when this cycle is lengthy, it can be a productivity killer and demotivate.
JRebel is a very good product and makes this possible, like a breeze, but when you can&#8217;t afford the license fee what do you do ? Well the following is an idea, that could be enough to get you going.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_groovy_to_the_rescue">Groovy to the rescue !</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use groovy, integrate groovy for the parts of the code you what to quickly prototype or change as groovy is a super set of java it will allow to have something at the end that will be easily convertible into java if your can&#8217;t deploy groovy code in the end result.
Integrating groovy is as easy as 3 steps:</p>
</div>
<div class="paragraph">
<p>Make the groovy embeddeable jar available
Use the GroovyScriptEngine to call the groovy code you whant to run
Read back the results from the call to the groovy code
One of the great advantages of Groovy is the excellent integration with Java and all the popular IDE&#8217;s that make even possible to have debug, code completion and even refractory while you benefit of dynamic scripting.</p>
</div>
<div class="sect2">
<h3 id="_step_1">Step 1</h3>
<div class="paragraph">
<p>To materialize a bit more the previous three steps if you are building your code with Gradle, making the step one will be as simple as adding the groovy-all jar in the dependencies</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://3.bp.blogspot.com/-Vei7gy5HSu4/Vi6HK0vbCzI/AAAAAAAAOvE/Klk9DxHiGXM/s320/screenshot.77.jpg" alt="Step 1">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_3">Step 2 &amp; 3</h3>
<div class="paragraph">
<p>Make the call to the to the groovy code using the GroovyScriptEngine, this is a regular java class that you create an instance and tell it where is the groovy source code to be executed:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://4.bp.blogspot.com/-TEOwy_yvBX0/Vi6JhmkG1XI/AAAAAAAAOvQ/_HgEdQexyMk/s320/screenshot.78.jpg" alt="Step 2 &amp; 3">
</div>
</div>
<div class="paragraph">
<p>The cool thing here is that the Groovy code been called actually implements a pure Java interface, so we can cross language boundaries using a type safe interface, from a "statically typed" to "optionally dynamically typed".
Bellow is the Goovy code as you can see it looks a lot like Java, and you can literally copy a Java class to a Groovy class without changing any code and it will run.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://4.bp.blogspot.com/-ZJsALXCuupM/Vi6hlKEFLXI/AAAAAAAAOvo/QTFcOhN_02E/s320/screenshot.80.jpg" alt="The groovy code">
</div>
</div>
<div class="paragraph">
<p>The following is the source directory where you can see that there is both Java and Groovy code.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://4.bp.blogspot.com/-Dp1HECX_J1Y/Vi6ip67qTMI/AAAAAAAAOvw/R-ti-vGaxL8/s320/screenshot.82.jpg" alt="The package structure">
</div>
</div>
<div class="paragraph">
<p>The following screenshot is a sample Spring Boot application running with Intellj IDE, this sample demonstrates the idea where the RestController is written in Java and call the Groovy code using the GroovyScriptEngine, and from what you can see in the image the debugger in stopped in a breakpoint in the Groovy code.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://1.bp.blogspot.com/-sAp3AkiJR-U/Vi18iegm_0I/AAAAAAAAOt0/t6ygfAVC9Kw/s320/screenshot.75.jpg" alt="Running with the debugger">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now with this setup one can do the quick prototype or fix in the groovy code, test debug and refactor and move the result in the end to java code and break away with lengthy code change cycles!</p>
</div>
<div class="sect2">
<h3 id="_example_solution_code">Example solution code</h3>
<div class="paragraph">
<p>Example code available at my repo:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/luistrigueiros/groovy-embedding" class="bare">https://github.com/luistrigueiros/groovy-embedding</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_disclaimer">Disclaimer</h3>
<div class="paragraph">
<p>The opinions expressed where are my own, and subject to change, please provide examples here this is not valid and I will review and amend the text.
Thank you stay Groovy !</p>
</div>
</div>
</div>
</div></p>
		
			<hr />
			
		</div>
	</div>
	<div>
			<div id="push"></div>
    
		    <div id="footer">
		      <div class="container">
		        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/" shape="rect">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org" shape="rect">JBake <span>v2.4.0</span></a></p>
		      </div>
		    </div>
	    
		    <!-- Le javascript
		    ================================================== -->
		    <!-- Placed at the end of the document so the pages load faster -->
		    <script xml:space="preserve" src="../../../js/jquery-1.11.1.min.js"></script>
		    <script xml:space="preserve" src="../../../js/bootstrap.min.js"></script>
		    <script xml:space="preserve" src="../../../js/prettify.js"></script>
    
    	</div>
    </body>
</html>